{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Capabilities Response",
  "type": "object",
  "required": [
    "capabilities",
    "versions"
  ],
  "properties": {
    "versions": {
      "type": "string"
    },
    "capabilities": {
      "$ref": "#/definitions/Capabilities"
    }
  },
  "definitions": {
    "Capabilities": {
      "title": "Capabilities",
      "description": "Describes the features of the specification which a data connector implements.",
      "type": "object",
      "properties": {
        "query": {
          "anyOf": [
            {
              "$ref": "#/definitions/QueryCapabilities"
            },
            {
              "type": "null"
            }
          ]
        },
        "explain": true,
        "mutations": {
          "anyOf": [
            {
              "$ref": "#/definitions/MutationCapabilities"
            },
            {
              "type": "null"
            }
          ]
        },
        "relationships": true
      }
    },
    "QueryCapabilities": {
      "title": "Query Capabilities",
      "type": "object",
      "properties": {
        "relationComparisons": {
          "description": "Does the agent support comparisons that involve related collections (ie. joins)?"
        },
        "orderByAggregate": {
          "description": "Does the agent support ordering by an aggregated array relationship?"
        },
        "foreach": {
          "description": "Does the agent support foreach queries, i.e. queries with variables"
        }
      }
    },
    "MutationCapabilities": {
      "title": "Mutation Capabilities",
      "type": "object",
      "properties": {
        "nestedInserts": {
          "description": "Whether or not nested inserts to related collections are supported"
        },
        "returning": true
      }
    }
  }
}