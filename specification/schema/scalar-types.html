<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Scalar Types - Hasura Data Connectors Developer&#x27;s Guide</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/pagetoc.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../overview.html">Overview</a></li><li class="chapter-item expanded affix "><li class="part-title">API Specification</li><li class="chapter-item expanded "><a href="../../specification/index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../../specification/changelog.html"><strong aria-hidden="true">2.</strong> Changelog</a></li><li class="chapter-item expanded "><a href="../../specification/basics.html"><strong aria-hidden="true">3.</strong> Basics</a></li><li class="chapter-item expanded "><a href="../../specification/versioning.html"><strong aria-hidden="true">4.</strong> Versioning</a></li><li class="chapter-item expanded "><a href="../../specification/error-handling.html"><strong aria-hidden="true">5.</strong> Error Handling</a></li><li class="chapter-item expanded "><a href="../../specification/health.html"><strong aria-hidden="true">6.</strong> Service Health</a></li><li class="chapter-item expanded "><a href="../../specification/metrics.html"><strong aria-hidden="true">7.</strong> Metrics</a></li><li class="chapter-item expanded "><a href="../../specification/telemetry.html"><strong aria-hidden="true">8.</strong> Telemetry</a></li><li class="chapter-item expanded "><a href="../../specification/capabilities.html"><strong aria-hidden="true">9.</strong> Capabilities</a></li><li class="chapter-item expanded "><a href="../../specification/types.html"><strong aria-hidden="true">10.</strong> Types</a></li><li class="chapter-item expanded "><a href="../../specification/schema/index.html"><strong aria-hidden="true">11.</strong> Schema</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../specification/schema/scalar-types.html" class="active"><strong aria-hidden="true">11.1.</strong> Scalar Types</a></li><li class="chapter-item expanded "><a href="../../specification/schema/object-types.html"><strong aria-hidden="true">11.2.</strong> Object Types</a></li><li class="chapter-item expanded "><a href="../../specification/schema/collections.html"><strong aria-hidden="true">11.3.</strong> Collections</a></li><li class="chapter-item expanded "><a href="../../specification/schema/functions.html"><strong aria-hidden="true">11.4.</strong> Functions</a></li><li class="chapter-item expanded "><a href="../../specification/schema/procedures.html"><strong aria-hidden="true">11.5.</strong> Procedures</a></li><li class="chapter-item expanded "><a href="../../specification/schema/capabilities.html"><strong aria-hidden="true">11.6.</strong> Capabilities</a></li><li class="chapter-item expanded "><a href="../../specification/schema/arguments.html"><strong aria-hidden="true">11.7.</strong> Request-level arguments</a></li></ol></li><li class="chapter-item expanded "><a href="../../specification/queries/index.html"><strong aria-hidden="true">12.</strong> Queries</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../specification/queries/field-selection.html"><strong aria-hidden="true">12.1.</strong> Field Selection</a></li><li class="chapter-item expanded "><a href="../../specification/queries/filtering.html"><strong aria-hidden="true">12.2.</strong> Filtering</a></li><li class="chapter-item expanded "><a href="../../specification/queries/sorting.html"><strong aria-hidden="true">12.3.</strong> Sorting</a></li><li class="chapter-item expanded "><a href="../../specification/queries/pagination.html"><strong aria-hidden="true">12.4.</strong> Pagination</a></li><li class="chapter-item expanded "><a href="../../specification/queries/aggregates.html"><strong aria-hidden="true">12.5.</strong> Aggregates</a></li><li class="chapter-item expanded "><a href="../../specification/queries/grouping.html"><strong aria-hidden="true">12.6.</strong> Grouping</a></li><li class="chapter-item expanded "><a href="../../specification/queries/arguments.html"><strong aria-hidden="true">12.7.</strong> Arguments</a></li><li class="chapter-item expanded "><a href="../../specification/queries/relationships.html"><strong aria-hidden="true">12.8.</strong> Relationships</a></li><li class="chapter-item expanded "><a href="../../specification/queries/variables.html"><strong aria-hidden="true">12.9.</strong> Variables</a></li><li class="chapter-item expanded "><a href="../../specification/queries/functions.html"><strong aria-hidden="true">12.10.</strong> Functions</a></li></ol></li><li class="chapter-item expanded "><a href="../../specification/mutations/index.html"><strong aria-hidden="true">13.</strong> Mutations</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../specification/mutations/procedures.html"><strong aria-hidden="true">13.1.</strong> Procedures</a></li></ol></li><li class="chapter-item expanded "><a href="../../specification/explain.html"><strong aria-hidden="true">14.</strong> Explain</a></li><li class="chapter-item expanded affix "><li class="part-title">Tutorial</li><li class="chapter-item expanded "><a href="../../tutorial/index.html"><strong aria-hidden="true">15.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../../tutorial/setup.html"><strong aria-hidden="true">16.</strong> Setup</a></li><li class="chapter-item expanded "><a href="../../tutorial/testing.html"><strong aria-hidden="true">17.</strong> Testing</a></li><li class="chapter-item expanded "><a href="../../tutorial/getting-started.html"><strong aria-hidden="true">18.</strong> Getting Started</a></li><li class="chapter-item expanded "><a href="../../tutorial/capabilities.html"><strong aria-hidden="true">19.</strong> Capabilities</a></li><li class="chapter-item expanded "><a href="../../tutorial/schema.html"><strong aria-hidden="true">20.</strong> Schema</a></li><li class="chapter-item expanded "><a href="../../tutorial/queries/index.html"><strong aria-hidden="true">21.</strong> Queries</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../tutorial/queries/variables.html"><strong aria-hidden="true">21.1.</strong> Query Variables</a></li><li class="chapter-item expanded "><a href="../../tutorial/queries/arguments.html"><strong aria-hidden="true">21.2.</strong> Evaluating Arguments</a></li><li class="chapter-item expanded "><a href="../../tutorial/queries/execute/index.html"><strong aria-hidden="true">21.3.</strong> Executing Queries</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../tutorial/queries/execute/sorting.html"><strong aria-hidden="true">21.3.1.</strong> Sorting</a></li><li class="chapter-item expanded "><a href="../../tutorial/queries/execute/filtering.html"><strong aria-hidden="true">21.3.2.</strong> Filtering</a></li><li class="chapter-item expanded "><a href="../../tutorial/queries/execute/pagination.html"><strong aria-hidden="true">21.3.3.</strong> Pagination</a></li><li class="chapter-item expanded "><a href="../../tutorial/queries/execute/aggregates.html"><strong aria-hidden="true">21.3.4.</strong> Aggregates</a></li><li class="chapter-item expanded "><a href="../../tutorial/queries/execute/field-selection.html"><strong aria-hidden="true">21.3.5.</strong> Field Selection</a></li><li class="chapter-item expanded "><a href="../../tutorial/queries/execute/grouping.html"><strong aria-hidden="true">21.3.6.</strong> Grouping</a></li><li class="chapter-item expanded "><a href="../../tutorial/queries/execute/relationships.html"><strong aria-hidden="true">21.3.7.</strong> Relationships</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../tutorial/mutations/index.html"><strong aria-hidden="true">22.</strong> Mutations</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../tutorial/mutations/operations.html"><strong aria-hidden="true">22.1.</strong> Handling Operations</a></li><li class="chapter-item expanded "><a href="../../tutorial/mutations/procedures.html"><strong aria-hidden="true">22.2.</strong> Procedures</a></li></ol></li><li class="chapter-item expanded "><a href="../../tutorial/explain.html"><strong aria-hidden="true">23.</strong> Explain</a></li><li class="chapter-item expanded "><a href="../../tutorial/health.html"><strong aria-hidden="true">24.</strong> Health and Metrics</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference</li><li class="chapter-item expanded "><a href="../../reference/types.html"><strong aria-hidden="true">25.</strong> Types</a></li><li class="chapter-item expanded "><a href="../../reference/json-schema.html"><strong aria-hidden="true">26.</strong> JSON Schema</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Hasura Data Connectors Developer&#x27;s Guide</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="scalar-types"><a class="header" href="#scalar-types">Scalar Types</a></h1>
<p>The schema should describe any irreducible <em>scalar types</em>. Scalar types can be used as the types of columns, or in general as the types of object fields.</p>
<p>Scalar types define several types of operations, which extend the capabilities of the query and mutation APIs: <em>comparison operators</em> and <em>aggregate functions</em>.</p>
<h2 id="type-representations"><a class="header" href="#type-representations">Type Representations</a></h2>
<p>A scalar type definition must include a <em>type representation</em>. The representation indicates to potential callers what values can be expected in responses, and what values are considered acceptable in requests.</p>
<h3 id="supported-representations"><a class="header" href="#supported-representations">Supported Representations</a></h3>
<div class="table-wrapper"><table><thead><tr><th><code>type</code></th><th>Description</th><th>JSON representation</th></tr></thead><tbody>
<tr><td><code>boolean</code></td><td>Boolean</td><td>Boolean</td></tr>
<tr><td><code>string</code></td><td>String</td><td>String</td></tr>
<tr><td><code>int8</code></td><td>An 8-bit signed integer with a minimum value of -2^7 and a maximum value of 2^7 - 1</td><td>Number</td></tr>
<tr><td><code>int16</code></td><td>A 16-bit signed integer with a minimum value of -2^15 and a maximum value of 2^15 - 1</td><td>Number</td></tr>
<tr><td><code>int32</code></td><td>A 32-bit signed integer with a minimum value of -2^31 and a maximum value of 2^31 - 1</td><td>Number</td></tr>
<tr><td><code>int64</code></td><td>A 64-bit signed integer with a minimum value of -2^63 and a maximum value of 2^63 - 1</td><td>String</td></tr>
<tr><td><code>float32</code></td><td>An IEEE-754 single-precision floating-point number</td><td>Number</td></tr>
<tr><td><code>float64</code></td><td>An IEEE-754 double-precision floating-point number</td><td>Number</td></tr>
<tr><td><code>biginteger</code></td><td>Arbitrary-precision integer string</td><td>String</td></tr>
<tr><td><code>bigdecimal</code></td><td>Arbitrary-precision decimal string</td><td>String</td></tr>
<tr><td><code>uuid</code></td><td>UUID string (8-4-4-4-12 format)</td><td>String</td></tr>
<tr><td><code>date</code></td><td>ISO 8601 date</td><td>String</td></tr>
<tr><td><code>timestamp</code></td><td>ISO 8601 timestamp</td><td>String</td></tr>
<tr><td><code>timestamptz</code></td><td>ISO 8601 timestamp-with-timezone</td><td>String</td></tr>
<tr><td><code>geography</code></td><td>GeoJSON, per RFC 7946</td><td>JSON</td></tr>
<tr><td><code>geometry</code></td><td>GeoJSON Geometry object, per RFC 7946</td><td>JSON</td></tr>
<tr><td><code>bytes</code></td><td>Base64-encoded bytes</td><td>String</td></tr>
<tr><td><code>json</code></td><td>Arbitrary JSON</td><td>JSON</td></tr>
</tbody></table>
</div>
<h3 id="enum-representations"><a class="header" href="#enum-representations">Enum Representations</a></h3>
<p>A scalar type with a representation of type <code>enum</code> accepts one of a set of string values, specified by the <code>one_of</code> argument.</p>
<p>For example, this representation indicates that the only three valid values are the strings <code>"foo"</code>, <code>"bar"</code> and <code>"baz"</code>:</p>
<pre><code class="language-json">{
  "type": "enum",
  "one_of": ["foo", "bar", "baz"]
}
</code></pre>
<h2 id="comparison-operators"><a class="header" href="#comparison-operators">Comparison Operators</a></h2>
<p>Comparison operators extend the query AST with the ability to express new binary comparison expressions in the predicate.</p>
<p>For example, a data connector might augment a <code>String</code> scalar type with a <code>LIKE</code> operator which tests for a fuzzy match based on a regular expression.</p>
<p>A comparison operator is either a <em>standard</em> operator, or a custom operator.</p>
<p>To define a comparison operator, add a <a href="../../reference/types.html#comparisonoperatordefinition"><code>ComparisonOperatorDefinition</code></a> to the <code>comparison_operators</code> field of the schema response.</p>
<p>For example:</p>
<pre><code class="language-json">{
  "scalar_types": {
    "String": {
      "aggregate_functions": {},
      "comparison_operators": {
        "like": {
          "type": "custom",
          "argument_type": {
            "type": "named",
            "name": "String"
          }
        }
      }
    }
  },
  ...
}
</code></pre>
<h3 id="standard-comparison-operators"><a class="header" href="#standard-comparison-operators">Standard Comparison Operators</a></h3>
<h4 id="equal"><a class="header" href="#equal"><code>Equal</code></a></h4>
<p>An operator defined using type <code>equal</code> tests if a column value is equal to a scalar value, another column value, or a variable.</p>
<h5 id="note-syntactic-equality"><a class="header" href="#note-syntactic-equality">Note: syntactic equality</a></h5>
<p>Specifically, a predicate expression which uses an operator of type <code>equal</code> should implement <em>syntactic equality</em>:</p>
<ul>
<li>An expression which tests for equality of a column with a <em>scalar</em> value or <em>variable</em> should return that scalar value exactly (equal as JSON values) for all rows in each corresponding row set, whenever the same column is selected.</li>
<li>An expression which tests for equality of a column with <em>another column</em> should return the same values in both columns (equal as JSON values) for all rows in each corresponding row set, whenever both of those those columns are selected.</li>
</ul>
<p>This type of equality is quite strict, and it might not be possible to implement such an operator for all scalar types. For example, a case-insensitive string type's natural case-insensitive equality operator would not meet the criteria above. In such cases, the scalar type should <em>not</em> provide an <em>equal</em> operator.</p>
<h4 id="in"><a class="header" href="#in"><code>In</code></a></h4>
<p>An operator defined using type <code>in</code> tests if a column value is a member of an array of values. The array is specified either as a scalar, a variable, or as the value of another column.</p>
<p>It should accept an array type as its argument, whose element type is the scalar type for which it is defined. It should be equivalent to a disjunction of individual equality tests on the elements of the provided array, where the equality test is an equivalence relation in the same sense as above.</p>
<h4 id="less_than-greater_than-less_than_or_equal-greater_than_or_equal"><a class="header" href="#less_than-greater_than-less_than_or_equal-greater_than_or_equal"><code>less_than</code>, <code>greater_than</code>, <code>less_than_or_equal</code>, <code>greater_than_or_equal</code></a></h4>
<p>An operator defined using type <code>less_than</code> tests if a column value is less than a specified value. Similarly for the other comparisons here.</p>
<p>If a connector defines more than one of these standard operators, then they should be compatible:</p>
<ul>
<li>When using <code>less_than</code>, a row should be included in the generated row set if and only if it would <em>not</em> be returned in the corresponding <code>greater_than_or_equal</code> comparison, and vice versa. More succinctly, it is expected that <code>x &lt; y</code> holds exactly when <code>x &gt;= y</code> does not hold.</li>
<li>It is expected that <code>x &lt; y</code> holds exactly when <code>y &gt; x</code> holds.</li>
<li>It is expected that <code>x &lt;= y</code> holds exactly when <code>y &gt;= x</code> holds.</li>
</ul>
<p>The <code>less_than_or_equal</code> and <code>greater_than_or_equal</code> operators are expected to be <em>reflexive</em>. That is, they should return a superset of those rows returned by the corresponding <code>equal</code> (syntactic equality) operator.</p>
<p>Each of these four operators is expected to be <em>transitive</em>. That is, for example <code>x &lt; y</code> and <code>y &lt; z</code> together imply <code>x &lt; z</code>, and similarly for the other operators.</p>
<h4 id="contains-icontains-starts_with-istarts_with-ends_with-iends_with"><a class="header" href="#contains-icontains-starts_with-istarts_with-ends_with-iends_with"><code>contains</code>, <code>icontains</code>, <code>starts_with</code>, <code>istarts_with</code>, <code>ends_with</code>, <code>iends_with</code></a></h4>
<p>These operators must only apply to scalar types whose type representation is <code>string</code>.</p>
<p>An operator defined using type <code>contains</code> tests if a string-valued column on the left contains a string value on the right. <code>icontains</code> is the case-insensitive variant.</p>
<p>An operator defined using type <code>starts_with</code> tests if a string-valued column on the left starts with a string value on the right. <code>istarts_with</code> is the case-insensitive variant.</p>
<p>An operator defined using type <code>ends_with</code> tests if a string-valued column on the left ends with a string value on the right. <code>iends_with</code> is the case-insensitive variant.</p>
<h3 id="custom-comparison-operators"><a class="header" href="#custom-comparison-operators">Custom Comparison Operators</a></h3>
<p>Data connectors can also define custom comparison operators using type <code>custom</code>. A custom operator is defined by its argument type, and its semantics is undefined.</p>
<h2 id="aggregate-functions"><a class="header" href="#aggregate-functions">Aggregate Functions</a></h2>
<p>Aggregate functions extend the query AST with the ability to express new aggregates within the <code>aggregates</code> portion of a query. They also allow sorting the query results via the <code>order_by</code> query field.</p>
<p><em>Note</em>: data connectors are required to implement the <em>count</em> and <em>count-distinct</em> aggregations for columns of all scalar types, and those operator is distinguished in the query AST. There is no need to define these aggregates as aggregate functions.</p>
<p>For example, a data connector might augment a <code>Float</code> scalar type with a <code>SUM</code> function which aggregates a sum of a collection of floating-point numbers.</p>
<p>Just like for comparison operators, an aggregate function is either a <em>standard</em> function, or a custom function.</p>
<p>To define an aggregate function, add a <a href="../../reference/types.html#aggregatefunctiondefinition"><code>AggregateFunctionDefinition</code></a> to the <code>aggregate_functions</code> field of the schema response.</p>
<p>For example:</p>
<pre><code class="language-json">{
  "scalar_types": {
    "Float": {
      "aggregate_functions": {
        "sum": {
          "type": "sum",
          "result_type": "Float"
        },
        "stddev": {
          "type": "custom",
          "result_type": {
            "type": "named",
            "name": "Float"
          }
        }
      },
      "comparison_operators": {}
    }
  },
  ...
}
</code></pre>
<h3 id="standard-aggregate-functions"><a class="header" href="#standard-aggregate-functions">Standard Aggregate Functions</a></h3>
<h4 id="sum"><a class="header" href="#sum"><code>sum</code></a></h4>
<p>An aggregate function defined using type <code>sum</code> should return the numerical sum of its provided values.</p>
<p>The result type should be provided explicitly, in the <code>result_type</code> field, and should be a scalar type with a type representation of either <code>Int64</code> or <code>Float64</code>, depending on whether the scalar type defining this function has an integer representation or floating point representation.</p>
<p>A <code>sum</code> function should ignore the order of its input values, and should be invariant of partitioning, that is: <code>sum(x, sum(y, z))</code> = <code>sum(x, y, z)</code> for any partitioning <code>x, y, z</code> of the input values. It should return <code>0</code> for an empty set of input values.</p>
<h4 id="average"><a class="header" href="#average"><code>average</code></a></h4>
<p>An aggregate function defined using type <code>average</code> should return the average of its provided values.</p>
<p>The result type should be provided explicitly, in the <code>result_type</code> field, and should be a scalar type with a type representation of <code>Float64</code>.</p>
<p>An <code>average</code> function should ignore the order of its input values. It should return <code>null</code> for an empty set of input values.</p>
<h4 id="min-max"><a class="header" href="#min-max"><code>min</code>, <code>max</code></a></h4>
<p>An aggregate function defined using type <code>min</code> or <code>max</code> should return the minimal/maximal value from its provided values, according to some ordering.</p>
<p>Its implicit result type, i.e. the type of the aggregated values, is the same as the scalar type on which the function is defined, but with nulls allowed if not allowed already.</p>
<p>A <code>min</code>/<code>max</code> function should return null for an empty set of input values.</p>
<p>If the set of input values is a singleton, then the function should return the single value.</p>
<p>A <code>min</code>/<code>max</code> function should ignore the order of its input values, and should be invariant of partitioning, that is: <code>min(x, min(y, z))</code> = <code>min(x, y, z)</code> for any partitioning <code>x, y, z</code> of the input values.</p>
<h3 id="custom-aggregate-functions"><a class="header" href="#custom-aggregate-functions">Custom Aggregate Functions</a></h3>
<p>A custom aggregate function has type <code>custom</code> and is defined by its <em>result type</em> - that is, the type of the aggregated data. The result type can be any type, not just a scalar type.</p>
<h2 id="extraction-functions"><a class="header" href="#extraction-functions">Extraction Functions</a></h2>
<p>Extraction functions extend the query AST with the ability to <em>extract</em> components from a value with a scalar type. Extraction functions can be used to <a href="../queries/grouping.html#extraction-functions-and-complex-dimensions">group by components of a scalar type</a>.</p>
<p>For example, a <code>Date</code> scalar type might expose extraction functions which extract the individual year, month and day components as integers.</p>
<p>Just like for comparison operators and aggregate functions, an extraction function is either a <em>standard</em> function, or a custom function.</p>
<p>To define an extraction function, add a <a href="../../reference/types.html#extractionfunctiondefinition"><code>ExtractionFunctionDefinition</code></a> to the <code>extraction_functions</code> field of the schema response.</p>
<p>For example:</p>
<pre><code class="language-json">{
  "scalar_types": {
    "Date": {
      "extraction_functions": {
        "year": {
          "type": "year",
          "result_type": "Int"
        },
      }
      "aggregate_functions": {},
      "comparison_operators": {}
    }
  },
  ...
}
</code></pre>
<h3 id="standard-extraction-functions"><a class="header" href="#standard-extraction-functions">Standard Extraction Functions</a></h3>
<p>The following standard extraction functions are supported:</p>
<ul>
<li><code>Day</code></li>
<li><code>DayOfWeek</code></li>
<li><code>DayOfYear</code></li>
<li><code>Hour</code></li>
<li><code>Microsecond</code></li>
<li><code>Millisecond</code></li>
<li><code>Minute</code></li>
<li><code>Month</code></li>
<li><code>Nanosecond</code></li>
<li><code>Quarter</code></li>
<li><code>Second</code></li>
<li><code>Week</code></li>
<li><code>Year</code></li>
</ul>
<p>For each of these, the return type should be a scalar type whose representation is one of <code>int8</code>, <code>int16</code>, <code>int32</code>, or <code>int64</code>.</p>
<h3 id="custom-extraction-functions"><a class="header" href="#custom-extraction-functions">Custom Extraction Functions</a></h3>
<p>A custom extraction function has type <code>custom</code> and is defined by its <em>result type</em> - that is, the type of the extracted data. The result type can be any type, not just a scalar type.</p>
<h2 id="see-also"><a class="header" href="#see-also">See also</a></h2>
<ul>
<li>Type <a href="../../reference/types.html#scalartype"><code>ScalarType</code></a></li>
<li><a href="../queries/filtering.html"><code>Filtering</code></a></li>
<li><a href="../queries/sorting.html"><code>Sorting</code></a></li>
<li><a href="../queries/aggregates.html"><code>Aggregates</code></a></li>
<li><a href="../queries/grouping.html"><code>Grouping</code></a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../specification/schema/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../specification/schema/object-types.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../specification/schema/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../specification/schema/object-types.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../theme/pagetoc.js"></script>


    </div>
    </body>
</html>
